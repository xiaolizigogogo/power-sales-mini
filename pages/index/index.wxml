<view class="container">
  <view wx:if="{{loading}}" class="loading-container flex-center">
    <view class="loading"></view>
  </view>
  <view wx:else>
    <!-- 未登录状态 -->
    <view wx:if="{{!isLogin}}" class="not-login-container flex-column flex-center">
      <image src="/assets/images/welcome.png" mode="aspectFit" class="welcome-image"></image>
      <text class="welcome-text">欢迎使用销售力小程序</text>
      <button class="button button-primary" bindtap="goToLogin">立即登录</button>
    </view>
    
    <!-- 已登录状态 -->
    <view wx:else class="logged-container">
      <!-- 用户信息卡片 -->
      <view class="card user-card flex-between">
        <view class="flex">
          <image src="{{userInfo.avatarUrl || '/assets/images/default-avatar.png'}}" class="avatar"></image>
          <view class="margin-left">
            <view class="text-bold">{{userInfo.nickName || '用户'}}</view>
            <view class="text-small text-primary">{{userRole === 'manager' ? '客户经理' : '普通客户'}}</view>
          </view>
        </view>
        <view class="badge">{{userRole === 'manager' ? '管理' : '客户'}}</view>
      </view>
      
      <!-- 功能区域 -->
      <view class="function-area">
        <view class="card">
          <view class="text-bold margin-bottom">快捷功能</view>
          <view class="grid">
            <view class="grid-item flex-column flex-center" wx:for="{{functions}}" wx:key="name">
              <image src="{{item.icon}}" mode="aspectFit" class="grid-icon"></image>
              <text class="text-small">{{item.name}}</text>
            </view>
          </view>
        </view>
      </view>
      
      <!-- 数据统计区域 -->
      <view class="statistics-area">
        <view class="card">
          <view class="text-bold margin-bottom">数据概览</view>
          <view class="flex-around">
            <view class="stat-item flex-column flex-center">
              <text class="text-large text-primary text-bold">0</text>
              <text class="text-small">今日订单</text>
            </view>
            <view class="stat-item flex-column flex-center">
              <text class="text-large text-success text-bold">0.00</text>
              <text class="text-small">本月销售额</text>
            </view>
            <view class="stat-item flex-column flex-center">
              <text class="text-large text-warning text-bold">0</text>
              <text class="text-small">待处理</text>
            </view>
          </view>
        </view>
      </view>
    </view>
  </view>
</view> 