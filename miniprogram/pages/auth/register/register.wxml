<view class="register-container">
  <!-- é¡µé¢å¤´éƒ¨ -->
  <view class="register-header">
    <view class="header-title">ä¼ä¸šæ³¨å†Œ</view>
    <view class="header-subtitle">å®Œå–„æ‚¨çš„ä¼ä¸šä¿¡æ¯ï¼Œäº«å—ä¸“ä¸šæœåŠ¡</view>
  </view>

  <!-- ç®€åŒ–æ³¨å†Œï¼Œéšè—æ­¥éª¤æŒ‡ç¤ºå™¨ -->
  <!--
  <view class="step-indicator">
    <view class="step-list">
      <block wx:for="{{stepTitles}}" wx:key="index">
        <view class="step-item {{currentStep >= index+1 ? 'active' : ''}} {{currentStep > index+1 ? 'completed' : ''}}">
          <view class="step-number">
            <text wx:if="{{currentStep > index+1}}" class="icon-check">âœ“</text>
            <text wx:else>{{index+1}}</text>
          </view>
          <view class="step-title">{{item}}</view>
        </view>
        <view wx:if="{{index < stepTitles.length-1}}" class="step-line {{currentStep > index+1 ? 'completed' : ''}}"></view>
      </block>
    </view>
  </view>
  -->

  <!-- è¡¨å•å†…å®¹åŒºåŸŸ -->
  <view class="form-container">
    <!-- ç®€åŒ–ä¸ºå•é¡µæ³¨å†Œè¡¨å• -->
    <view class="step-content">
      <view class="form-title">åŸºæœ¬ä¿¡æ¯</view>
      
      <view class="form-group">
        <view class="form-label">
          <text class="required">*</text>å§“å
        </view>
        <input 
          class="form-input {{formErrors.name ? 'error' : ''}}"
          type="text"
          placeholder="è¯·è¾“å…¥æ‚¨çš„å§“å"
          value="{{formData.name}}"
          data-field="name"
          bindinput="onInputChange"
          bindblur="validateInput"
        />
        <view wx:if="{{formErrors.name}}" class="error-msg">{{formErrors.name}}</view>
      </view>

      <view class="form-group">
        <view class="form-label">
          <text class="required">*</text>æ‰‹æœºå·
        </view>
        <input 
          class="form-input {{formErrors.phone ? 'error' : ''}}"
          type="number"
          placeholder="è¯·è¾“å…¥æ‰‹æœºå·"
          value="{{formData.phone}}"
          data-field="phone"
          bindinput="onInputChange"
          bindblur="validateInput"
        />
        <view wx:if="{{formErrors.phone}}" class="error-msg">{{formErrors.phone}}</view>
      </view>

      <!-- éªŒè¯ç åŠŸèƒ½å·²éšè— -->
      <!--
      <view class="form-group">
        <view class="form-label">
          <text class="required">*</text>éªŒè¯ç 
        </view>
        <view class="code-input-group">
          <input 
            class="form-input code-input {{formErrors.code ? 'error' : ''}}"
            type="number"
            placeholder="è¯·è¾“å…¥éªŒè¯ç "
            value="{{formData.code}}"
            data-field="code"
            bindinput="onInputChange"
            bindblur="validateInput"
          />
          <button 
            class="code-button {{!canGetCode ? 'disabled' : ''}}"
            disabled="{{!canGetCode}}"
            bindtap="getVerifyCode"
          >
            {{countdown > 0 ? countdown + 's' : 'è·å–éªŒè¯ç '}}
          </button>
        </view>
        <view wx:if="{{formErrors.code}}" class="error-msg">{{formErrors.code}}</view>
      </view>
      -->

      <view class="form-group">
        <view class="form-label">
          <text class="required">*</text>è®¾ç½®å¯†ç 
        </view>
        <input 
          class="form-input {{formErrors.password ? 'error' : ''}}"
          type="password"
          placeholder="è¯·è®¾ç½®ç™»å½•å¯†ç ï¼ˆ6-20ä½ï¼‰"
          value="{{formData.password}}"
          data-field="password"
          bindinput="onInputChange"
          bindblur="validateInput"
        />
        <view wx:if="{{formErrors.password}}" class="error-msg">{{formErrors.password}}</view>
      </view>

      <view class="form-group">
        <view class="form-label">
          <text class="required">*</text>ä¼ä¸šåç§°
        </view>
        <view class="company-input-group">
          <input 
            class="form-input {{formErrors.companyName ? 'error' : ''}}"
            type="text"
            placeholder="è¯·è¾“å…¥ä¼ä¸šåç§°"
            value="{{formData.companyName}}"
            data-field="companyName"
            bindinput="onInputChange"
            bindblur="validateInput"
          />
          <!-- ä¼ä¸šæœç´¢åˆ—è¡¨ -->
          <view wx:if="{{showCompanyList && companyList.length > 0}}" class="company-list">
            <block wx:for="{{companyList}}" wx:key="id">
              <view class="company-item" data-index="{{index}}" bindtap="selectCompany">
                <view class="company-name">{{item.company_name}}</view>
                <view class="company-info">{{item.industry_type}} Â· {{item.region}}</view>
              </view>
            </block>
          </view>
        </view>
        <view wx:if="{{formErrors.companyName}}" class="error-msg">{{formErrors.companyName}}</view>
      </view>
      <!-- è¡Œä¸šç±»å‹é€‰æ‹© -->
      <view class="form-group">
        <view class="form-label">è¡Œä¸šç±»å‹</view>
        <picker 
          mode="selector" 
          range="{{industryTypes}}" 
          range-key="label"
          value="{{industryIndex}}"
          bindchange="onIndustryChange"
        >
          <view class="picker-view {{industryIndex === -1 ? 'placeholder' : ''}}">
            {{industryIndex === -1 ? 'è¯·é€‰æ‹©è¡Œä¸šç±»å‹' : industryTypes[industryIndex].label}}
          </view>
        </picker>
      </view>
    </view>

    <!-- éšè—æ­¥éª¤2å’Œæ­¥éª¤3 -->
    <!--
    <view wx:if="{{currentStep === 2}}" class="step-content">
      <view class="form-title">ç”¨ç”µä¿¡æ¯</view>
      
      <view class="form-group">
        <view class="form-label">
          <text class="required">*</text>ç”¨ç”µå®¹é‡ (kW)
        </view>
        <input 
          class="form-input"
          type="digit"
          placeholder="è¯·è¾“å…¥ç”¨ç”µå®¹é‡"
          value="{{powerInfo.capacity}}"
          data-field="capacity"
          bindinput="onPowerInfoChange"
        />
      </view>

      <view class="form-group">
        <view class="form-label">
          <text class="required">*</text>æœˆç”¨ç”µé‡ (kWh)
        </view>
        <input 
          class="form-input"
          type="digit"
          placeholder="è¯·è¾“å…¥æœˆå¹³å‡ç”¨ç”µé‡"
          value="{{powerInfo.monthlyUsage}}"
          data-field="monthlyUsage"
          bindinput="onPowerInfoChange"
        />
      </view>

      <view class="form-group">
        <view class="form-label">
          <text class="required">*</text>å½“å‰ç”µä»· (å…ƒ/kWh)
        </view>
        <input 
          class="form-input"
          type="digit"
          placeholder="è¯·è¾“å…¥å½“å‰ç”µä»·"
          value="{{powerInfo.currentPrice}}"
          data-field="currentPrice"
          bindinput="onPowerInfoChange"
        />
      </view>

      <view class="form-group">
        <view class="form-label">
          <text class="required">*</text>è¡Œä¸šç±»å‹
        </view>
        <picker 
          mode="selector" 
          range="{{industryTypes}}" 
          range-key="label"
          value="{{industryIndex}}"
          bindchange="onIndustryChange"
        >
          <view class="picker-view {{industryIndex === -1 ? 'placeholder' : ''}}">
            {{industryIndex === -1 ? 'è¯·é€‰æ‹©è¡Œä¸šç±»å‹' : industryTypes[industryIndex].label}}
          </view>
        </picker>
      </view>

      <view class="form-group">
        <view class="form-label">ç”¨ç”µæ¨¡å¼</view>
        <picker 
          mode="selector" 
          range="{{usagePatterns}}" 
          range-key="label"
          value="{{patternIndex}}"
          bindchange="onPatternChange"
        >
          <view class="picker-view {{patternIndex === -1 ? 'placeholder' : ''}}">
            {{patternIndex === -1 ? 'è¯·é€‰æ‹©ç”¨ç”µæ¨¡å¼' : usagePatterns[patternIndex].label}}
          </view>
        </picker>
      </view>
    </view>

    <!-- æ­¥éª¤3ï¼šè®¤è¯ä¿¡æ¯ -->
    <view wx:if="{{currentStep === 3}}" class="step-content">
      <view class="form-title">è®¤è¯ä¿¡æ¯</view>
      
      <view class="form-group">
        <view class="form-label">
          <text class="required">*</text>è¥ä¸šæ‰§ç…§
        </view>
        <view class="upload-section">
          <view wx:if="{{!authInfo.businessLicense}}" class="upload-area" data-type="businessLicense" bindtap="uploadImage">
            <view class="upload-icon">ğŸ“·</view>
            <view class="upload-text">ç‚¹å‡»ä¸Šä¼ è¥ä¸šæ‰§ç…§</view>
            <view class="upload-tip">æ”¯æŒJPGã€PNGæ ¼å¼ï¼Œä¸è¶…è¿‡5MB</view>
          </view>
          <view wx:else class="uploaded-image">
            <image src="{{authInfo.businessLicense}}" mode="aspectFit" data-url="{{authInfo.businessLicense}}" bindtap="previewImage"/>
            <view class="image-actions">
              <view class="action-btn" data-type="businessLicense" bindtap="uploadImage">é‡æ–°ä¸Šä¼ </view>
              <view class="action-btn delete" data-type="businessLicense" bindtap="deleteImage">åˆ é™¤</view>
            </view>
          </view>
        </view>
      </view>

      <view class="form-group">
        <view class="form-label">
          <text class="required">*</text>èº«ä»½è¯æ­£é¢
        </view>
        <view class="upload-section">
          <view wx:if="{{!authInfo.idCardFront}}" class="upload-area" data-type="idCardFront" bindtap="uploadImage">
            <view class="upload-icon">ğŸ“·</view>
            <view class="upload-text">ç‚¹å‡»ä¸Šä¼ èº«ä»½è¯æ­£é¢</view>
            <view class="upload-tip">æ”¯æŒJPGã€PNGæ ¼å¼ï¼Œä¸è¶…è¿‡5MB</view>
          </view>
          <view wx:else class="uploaded-image">
            <image src="{{authInfo.idCardFront}}" mode="aspectFit" data-url="{{authInfo.idCardFront}}" bindtap="previewImage"/>
            <view class="image-actions">
              <view class="action-btn" data-type="idCardFront" bindtap="uploadImage">é‡æ–°ä¸Šä¼ </view>
              <view class="action-btn delete" data-type="idCardFront" bindtap="deleteImage">åˆ é™¤</view>
            </view>
          </view>
        </view>
      </view>

      <view class="form-group">
        <view class="form-label">
          <text class="required">*</text>èº«ä»½è¯èƒŒé¢
        </view>
        <view class="upload-section">
          <view wx:if="{{!authInfo.idCardBack}}" class="upload-area" data-type="idCardBack" bindtap="uploadImage">
            <view class="upload-icon">ğŸ“·</view>
            <view class="upload-text">ç‚¹å‡»ä¸Šä¼ èº«ä»½è¯èƒŒé¢</view>
            <view class="upload-tip">æ”¯æŒJPGã€PNGæ ¼å¼ï¼Œä¸è¶…è¿‡5MB</view>
          </view>
          <view wx:else class="uploaded-image">
            <image src="{{authInfo.idCardBack}}" mode="aspectFit" data-url="{{authInfo.idCardBack}}" bindtap="previewImage"/>
            <view class="image-actions">
              <view class="action-btn" data-type="idCardBack" bindtap="uploadImage">é‡æ–°ä¸Šä¼ </view>
              <view class="action-btn delete" data-type="idCardBack" bindtap="deleteImage">åˆ é™¤</view>
            </view>
          </view>
        </view>
      </view>

      <view class="auth-notice">
        <view class="notice-title">ğŸ”’ è®¤è¯è¯´æ˜</view>
        <view class="notice-content">
          â€¢ æˆ‘ä»¬æ‰¿è¯ºä¸¥æ ¼ä¿æŠ¤æ‚¨çš„éšç§ä¿¡æ¯\n
          â€¢ è¯ä»¶ä»…ç”¨äºä¼ä¸šèº«ä»½éªŒè¯\n
          â€¢ è®¤è¯é€šè¿‡åå³å¯äº«å—å®Œæ•´æœåŠ¡
        </view>
      </view>
    </view>
    -->
  </view>

  <!-- åº•éƒ¨æŒ‰é’®åŒºåŸŸ -->
  <view class="bottom-actions">
    <view class="action-buttons">
      <button 
        class="btn btn-primary full-width {{loading ? 'loading' : ''}}" 
        disabled="{{loading}}"
        bindtap="submitRegister"
      >
        {{loading ? 'æäº¤ä¸­...' : 'å®Œæˆæ³¨å†Œ'}}
      </button>
    </view>

    <view class="login-link">
      å·²æœ‰è´¦å·ï¼Ÿ<text class="link-text" bindtap="goToLogin">ç«‹å³ç™»å½•</text>
    </view>
  </view>
</view>

<!-- åŠ è½½æç¤º -->
<view wx:if="{{loading}}" class="loading-overlay">
  <view class="loading-content">
    <view class="loading-icon"></view>
    <view class="loading-text">æ­£åœ¨æäº¤...</view>
  </view>
</view> 