<view class="container">
  <!-- 产品图片轮播 -->
  <swiper class="product-swiper" indicator-dots circular>
    <swiper-item wx:for="{{ product.images }}" wx:key="*this">
      <image src="{{ item }}" mode="aspectFill" class="product-image" />
    </swiper-item>
  </swiper>

  <!-- 产品基本信息 -->
  <view class="product-info">
    <view class="product-header">
      <view class="product-name">{{ product.name }}</view>
      <view class="product-price">
        <text class="price-label">电价：</text>
        <text class="price-value">¥{{ product.price }}/度</text>
      </view>
    </view>
    <view class="product-tags">
      <view class="tag" wx:for="{{ product.tags }}" wx:key="*this">{{ item }}</view>
    </view>
    <view class="product-desc">{{ product.description }}</view>
  </view>

  <!-- 产品详细信息 -->
  <view class="product-details">
    <van-tabs active="{{ activeTab }}" bind:change="onTabChange">
      <!-- 套餐详情 -->
      <van-tab title="套餐详情">
        <view class="detail-section">
          <view class="section-title">套餐包含</view>
          <view class="feature-list">
            <view class="feature-item" wx:for="{{ product.features }}" wx:key="*this">
              <van-icon name="success" color="#409EFF" />
              <text>{{ item }}</text>
            </view>
          </view>
        </view>
        <view class="detail-section">
          <view class="section-title">使用说明</view>
          <view class="instruction-list">
            <view class="instruction-item" wx:for="{{ product.instructions }}" wx:key="*this">
              {{ index + 1 }}. {{ item }}
            </view>
          </view>
        </view>
      </van-tab>

      <!-- 价格说明 -->
      <van-tab title="价格说明">
        <view class="detail-section">
          <view class="price-table">
            <view class="table-row header">
              <view class="cell">用电量</view>
              <view class="cell">单价（元/度）</view>
              <view class="cell">说明</view>
            </view>
            <view class="table-row" wx:for="{{ product.priceTiers }}" wx:key="tier">
              <view class="cell">{{ item.range }}</view>
              <view class="cell">{{ item.price }}</view>
              <view class="cell">{{ item.note }}</view>
            </view>
          </view>
        </view>
      </van-tab>

      <!-- 常见问题 -->
      <van-tab title="常见问题">
        <view class="detail-section">
          <van-collapse value="{{ activeCollapse }}" bind:change="onCollapseChange">
            <van-collapse-item 
              wx:for="{{ product.faqs }}" 
              wx:key="question"
              title="{{ item.question }}"
              name="{{ index }}"
            >
              {{ item.answer }}
            </van-collapse-item>
          </van-collapse>
        </view>
      </van-tab>
    </van-tabs>
  </view>

  <!-- 底部操作栏 -->
  <view class="bottom-bar">
    <view class="action-buttons">
      <button class="btn calculator" bindtap="goToCalculator">
        <van-icon name="balance-list-o" />
        <text>电费计算</text>
      </button>
      <button class="btn contact" bindtap="contactService">
        <van-icon name="service-o" />
        <text>在线咨询</text>
      </button>
    </view>
    <button class="btn primary" bindtap="createOrder">立即购买</button>
  </view>
</view> 